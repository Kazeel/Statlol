{
    "collab_server" : "",
    "contents" : "#\n# This is a Shiny web application. You can run the application by clicking\n# the 'Run App' button above.\n#\n# Find out more about building applications with Shiny here:\n#\n#    http://shiny.rstudio.com/\n#\n\nsource(\"./fonctions_lol.R\", local = TRUE)\nsource(\"./fonctions_team.R\", local = TRUE)\nrequire(jsonlite)\nrequire(curl)\nrequire(httr)\nrequire(TriMatch)\nrequire(googleVis)\nlibrary(shiny)\nlibrary(DT)\n\n# Define UI for application that draws a histogram\nui <- navbarPage(\n   \n   # Application title\n   \"My LOL Team\",\n   \n   tabPanel(\"Overview\",\n     sidebarLayout(\n     sidebarPanel(\n       textInput(\"apikey\", \"Riot Api key\",\"\"),\n       textInput(\"topname\", \"Top name\",\"RKSReidoz\"),\n       textInput(\"junname\", \"Jungler name\",\"Kazeel\"),\n       textInput(\"midname\", \"Mid name\",\"Mashu\"),\n       textInput(\"adcname\", \"Adc name\",\"Redwhale\"),\n       textInput(\"supname\", \"Sup name\",\"TheDeathcookie\"),\n       actionButton(\"analyze\", \"Analyze\")\n       \n       \n     ),\n     #################################################################################\n     # Show a plot of the generated distribution\n     mainPanel(tabsetPanel(\n       tabPanel(\"Winrate\", \n                fluidRow(\n                  column(4,htmlOutput(\"winrate_summary\")),\n                  column(4,\n                         htmlOutput(\"winrate_Bside\"),\n                         htmlOutput(\"winrate_Rside\")),\n                  column(4)\n                  )),\n       tabPanel(\"Farm\",\n                fluidRow(\n                  column(8,htmlOutput(\"farm_summary\")),\n                  column(8,htmlOutput(\"farm_win\"))\n                  )\n                ),\n       tabPanel(\"KDA\",\n                fluidRow(\n                  column(8,htmlOutput(\"kda_summary\")),\n                  column(8,htmlOutput(\"kda_win\"))\n                  )\n                ),\n       tabPanel(\"Data\", DT::dataTableOutput(\"fulltable\"))\n     )\n     \n     )\n   ))\n   # Sidebar with a slider input for number of bins \n   \n)\n\n################################################################################################################\n# SERVER\n#################################################################################################################\n\nserver <- function(input, output) {\n  \n  observeEvent(input$analyze, { #reaction to analyze button\n    \n    # Create a Progress object\n    progress <- shiny::Progress$new()\n    # Make sure it closes when we exit this reactive, even if there's an error\n    on.exit(progress$close())\n    #First Progress\n    progress$set(message = \"Fetch Data\", value = 1/3)\n    \n    #Generate data\n    data<-team.allstats(c(input$topname,input$junname,input$midname,input$adcname,input$supname),\"euw1\",input$apikey)\n    \n    # Last progress\n    progress$inc(1/10, detail = \"Render\")\n    \n    #######################################################\n    #Output Winrate_summary for Overview\n    output$winrate_summary <- renderGvis({\n      gvisPieChart(data = team.winrate(data), \n                   labelvar = \"Win\", \n                   numvar = \"Winrate\", \n                   options = list(\n                     title =\"Winrate of the team\",\n                     legend = {position = 'none'},\n                     width=300, height=300,\n                     colors=\"['#156711','#540002']\"))\n    })#End Output\n    #######################################################\n    progress$inc(1/10, detail = \"calculate Winrate\")\n    winrate_side <- team.winrate(data,\"side\")\n    #######################################################\n    #Output Winrate_Bside for Overview\n    output$winrate_Bside <- renderGvis({\n      gvisPieChart(data = winrate_side[,c(\"Win\",\"Blue\")], \n                   labelvar = \"Win\", \n                   numvar = \"Blue\", \n                   options = list(\n                     title =\"Winrate when team play on Blue Side\",\n                     legend = {position = 'none'},\n                     width=300, height=300,\n                     colors=\"['#156711','#540002']\"))\n    })#End Output\n    #######################################################\n    #Output Winrate_Rside for Overview\n    output$winrate_Rside <- renderGvis({\n      gvisPieChart(data = winrate_side[,c(\"Win\",\"Red\")], \n                   labelvar = \"Win\", \n                   numvar = \"Red\", \n                   options = list(\n                     title =\"Winrate when team play on Red Side\",\n                     legend = {position = 'none'},\n                     width=300, height=300,\n                     colors=\"['#156711','#540002']\"))\n    })#End Output\n    #######################################################\n    progress$inc(1/10, detail = \"calculate farming\")\n    #######################################################\n    #Output Farm_win for Overview\n    output$farm_summary <- renderGvis({\n      gvisColumnChart(data = team.farm(data),\n                   options = list(\n                     title =\"Minions kill (including jungle) per Minute\",\n                     legend = {position = 'none'}))\n    })#End Output\n    #######################################################\n    #Output Farm_summary for Overview\n    output$farm_win <- renderGvis({\n      gvisColumnChart(data = team.farm(data,\"win\"), \n                      options = list(\n                        title =\"Minions kill per Minute depending of Victory\",\n                        legend = {position = 'none'},\n                        colors=\"['#156711','#540002']\"))\n    })#End Output\n    #######################################################\n    progress$inc(1/10, detail = \"calculate KDA\")\n    #######################################################\n    #Output Kda summary for Overview\n    output$kda_summary <- renderGvis({\n      gvisColumnChart(data = team.kda(data, onenumbers = \"yes\"),\n                      options = list(\n                        title =\"KDA\",\n                        legend = {position = 'none'}))\n    })#End Output\n    #######################################################\n    #Output Kda win for Overview\n    output$kda_win <- renderGvis({\n      gvisColumnChart(data = team.kda(data=data,filtre=\"win\",onenumbers = \"yes\"), \n                      options = list(\n                        title =\"KDA depending of Victory\",\n                        legend = {position = 'none'},\n                        colors=\"['#156711','#540002']\"))\n    })#End Output\n    #######################################################\n    #Output table\n    output$fulltable = DT::renderDataTable({\n      data\n    }) # End table\n    \n    #Output table\n    output$meantable = DT::renderDataTable({\n      team.summary(data,\"mean\")\n    }) # End table\n    #######################################################\n    #Output Plot\n    output$plotKDA <- renderGvis({\n      gvisColumnChart(summary[,c(\"Group.1\",\"Kill\",\"Death\",\"Assist\")],options=list(width=670, height=600))\n    })#End Plot\n    \n  })## End ObserveEvent\n   \n  \n} # End Server\n\n############################################################################################################\n# RUN\n#############################################################################################################\n# Run the application \nshinyApp(ui = ui, server = server)\n\n",
    "created" : 1508678620709.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3669027041",
    "id" : "C0886AA3",
    "lastKnownWriteTime" : 1508919996,
    "last_content_update" : 1508919996896,
    "path" : "~/GitHub/Statlol/app.R",
    "project_path" : "app.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}